<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
                <div class="section animated-row" data-section="slide0">
                <div class="section-inner">
                    <div class="row justify-content-center">
                        <div class="col-md-8 wide-col-laptop">
                            <div class="title-block animate" data-animate="fadeInUp">
                                <span>–û—Ç–∑—ã–≤—ã</span>
                                <h2>–ß—Ç–æ –æ–±–æ –º–Ω–µ –≥–æ–≤–æ—Ä—è—Ç?</h2>
                            </div>
                            <div class="col-md-8 offset-md-2">
                                <div class="testimonials-section">
                                    <div class="testimonials-slider owl-carousel">
                                        <div class="item animate" data-animate="fadeInUp">
                                            <div class="testimonial-item">
                                                <div class="client-row">
                                                    <img src="images/profile-01.jpg" class="rounded-circle" alt="profile 1">
                                                </div>
                                                <div class="testimonial-content">
                                                    <h4>Sandar</h4>
                                                    <p>"Ut varius leo eu mauris lacinia, eleifend posuere urna gravida. Aenean a mattis lacus."</p>
                                                    <span>Managing Director</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="item animate" data-animate="fadeInUp">
                                            <div class="testimonial-item">
                                                <div class="client-row">
                                                    <img src="images/profile-01.jpg" class="rounded-circle" alt="profile 2">
                                                </div>
                                                <div class="testimonial-content">
                                                    <h4>Shinn</h4>
                                                    <p>"Nam iaculis, leo nec facilisis sollicitudin, dui massa tempus odio, vitae malesuada ante elit vitae eros."</p>
                                                    <span>CEO and Founder</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="item animate" data-animate="fadeInUp">
                                            <div class="testimonial-item">
                                                <div class="client-row">
                                                    <img src="images/profile-01.jpg" class="rounded-circle" alt="profile 3">
                                                </div>
                                                <div class="testimonial-content">
                                                    <h4>Marlar</h4>
                                                    <p>"Etiam efficitur, tortor facilisis finibus semper, diam magna fringilla lectus, et fringilla felis urna posuere tortor."</p>
                                                    <span>Chief Marketing Officer</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
</head>
<body>

</body>
</html>



                    <div class="welcome-box" style="margin: 0 auto;">
                        <p class="animate" data-animate="fadeInUp" style="color:#ffffff; font-size: 32px;
                    font-weight: bolder; margin: 0 auto;
                    line-height: 100% ; text-shadow: #000000 3px 15px 30px;">–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä QR - –∫–æ–¥–æ–≤<br><br><br>–í–∞—à QR-–∫–æ–¥:<br><br></p>
                        <div class="contact-row" id="qr_view" style="margin: 0 auto; width: 300px; text-shadow: #000000 3px 3px 3px;"></div>
                        <p class="animate" data-animate="fadeInUp" style="color:#ffffff; font-size: 32px;
                    font-weight: bolder; margin: 0 auto;
                    line-height: 100% ; text-shadow: #000000 3px 15px 30px;"><br>–í–≤–µ–¥—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:<br><br></p>
                        <div class="contact-row" id="qr_url" style="margin: 0 auto; width: auto; font-size: 15px; color: black; text-shadow: #ffffff 5px 5px 5px;"></div>
                            <div data-animate="fadeInUp">
                                <script type="py" config='{ "packages": [ "qrcode" , "Pillow" ] }'>
                                    from pyscript import display , window , document
                                    import qrcode
                                    from PIL import Image

                                    try:
                                        url = input('–í–≤–µ–¥–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: ')

                                        display(url, target="qr_url")
                                        img = qrcode.make(url)
                                        display(img, target="qr_view")
                                    except Exception as exc:
                                        display(exc)
                                </script>
                            </div>
                    </div>


                                            try:
                                                from pyscript import display, window, document
                                                from gtts import gTTS


                                                def get_url(*args):
                                                    document.getElementById("qr_show").innerHTML = ""
                                                    document.getElementById("text_show").innerHTML = ""
                                                    url = document.getElementById("input_text").value
                                                    display(url, target="text_show")
                                                    display(img, target="qr_show")

                                                    speech = gTTS(text=text, lang='ru', slow=True)
                                                    speech.save("name_status.mp3")
                                                    os.system("name_status.mp3")
                                                    file.close()

                                                    href = document.getElementById("qr_show").innerHTML
                                                    src = href[href.find('="')+2:href.find('></')-1]
                                                    link = f'<a id="down" href="{src}" download="{src}">üëâ...–°–æ—Ö—Ä–∞–Ω–∏—Ç—å QR-–∫–æ–¥...üëà</a>'
                                                    document.getElementById("down").innerHTML = link

                                            except Exception as exc:
                                                display(exc)


                                <script type="py" config='{ "packages": [ "pdfminer.six" ] }' output="print_output">
                                    try:
                                        import asyncio
                                        import zipfile
                                        from js import document, FileReader, Uint8Array
                                        from pyodide.ffi import create_proxy
                                        import io

                                        async def process_file(event):
                                            fileList = event.target.files.to_py()
                                            for f in fileList:
                                                data = Uint8Array.new(await f.arrayBuffer())
                                                mf = io.BytesIO(bytearray(data))
                                                with zipfile.ZipFile(mf,"r") as zf:
                                                    nl=zf.namelist()
                                                    nlf=" ".join(nl)
                                                    document.getElementById("content").innerText += "\n Test 2: reading file from local file system: "+f.name+" content:"+nlf
                                                with open("b.zip","wb") as outb:
                                                    outb.write(bytearray(data))
                                                with zipfile.ZipFile("b.zip", "r") as zf:
                                                    nl=zf.namelist()
                                                    nlf=" ".join(nl)
                                                document.getElementById("content").innerText += "\n Test 3: reading the same file but first save it in virtual fs and read it: " + nlf



                                        def main():
                                            # Create a Python proxy for the callback function
                                            # process_file() is your function to process events from FileReader
                                            file_event = create_proxy(process_file)
                                            # Set the listener to the callback
                                            e = document.getElementById("myfile")
                                            e.addEventListener("change", file_event, False)

                                            mf = io.BytesIO()
                                            with zipfile.ZipFile(mf, mode="w",compression=zipfile.ZIP_DEFLATED) as zf:
                                                zf.writestr('file1.txt', b"hi")
                                                zf.writestr('file2.txt', str.encode("hi"))
                                                zf.writestr('file3.txt', str.encode("hi",'utf-8'))
                                            with open("a.zip", "wb") as f: # use `wb` mode
                                                f.write(mf.getvalue())

                                            with zipfile.ZipFile("a.zip", "r") as zf:
                                                nl=zf.namelist()
                                                nlf=" ".join(nl)

                                            document.getElementById("content").innerText = "Test 1: reading a dummy zip from virtual file system: " + nlf


                                        main()
                                    except Exception as exc:
                                        document.getElementById("print_output").innerHTML = exc
                                </script>


<script type="py" config='{ "packages": ["pytube" , "ssl" , "websockets"], "fetch": [ { "files": [ "test_ui.py" ]  } ] }' output="qr_show">


    <script type="py" config='{ "packages": ["pytube" , "ssl" , "websockets"], "fetch": [ { "files": [ "test_ui.py" ]  } ] }' output="qr_show">
                        try:
                            from pyscript import display, window, document
                            from pyodide.http import open_url, pyfetch
                            import pytube
                            import test_ui
                            import asyncio

                            def get_url(*args):
                                f = test_ui.start_ui()

                        except Exception as exc:
                            display(exc)
                    </script>

                    <script type="py" terminal config='{ "packages": [ "gtts", "websockets" , "ssl" ] }' output="qr_show">

                        try:
                            import logging, pyodide
                            from js import showDirectoryPicker, Object
                            from pyodide.ffi import to_js
                            import pyodide_js
                            import os
                            


                
                            logging.basicConfig(format='%(levelname)s:%(message)s', level=logging.DEBUG)


                            async def get_url(*args):
                                try:
                                    
                                    modeObject = to_js({ "mode": "readwrite" }, dict_converter=Object.fromEntries)
                                    dirHandle = await showDirectoryPicker()
                                    if await dirHandle.queryPermission(modeObject) != "granted":
                                        if await dirHandle.requestPermission(modeObject) != "granted":
                                            raise Exception("Unable to read and write directory")
                                    nativefs = await pyodide_js.mountNativeFS("/mount_dir", dirHandle)
                                    
                                    print(os.listdir('/mount_dir'))
                                            
                            
                                    

                                except Exception as exc:
                                    print(exc)
                                  

                        except Exception as exc:
                            print(exc)
                    </script>
                    <script type="py" terminal config='{ "packages": [ "gtts", "websockets" , "ssl", "pyodide_http" ] }' output="qr_show" crossorigin>

                        try:
                            import logging, pyodide, pyscript, requests
                            from js import showDirectoryPicker, Object
                            from pyodide.ffi import to_js
                            import pyodide_js
                            import os

                            logging.basicConfig(format='%(levelname)s:%(message)s', level=logging.DEBUG)


                            async def get_url(*args):
                                try:
                                    import pyodide_http
                                    pyodide_http.patch_all()  # Patch all libraries

                                    from js import XMLHttpRequest

                                    req = XMLHttpRequest.new()
                                    request = requests.Session()
                                    print(req)
                                    print(request)
                                    print(req.open("GET", "https://myexternalip.com/raw", True))
                                    print(req.send('None'))



                                    modeObject = to_js({ "mode": "readwrite" }, dict_converter=Object.fromEntries)
                                    dirHandle = await showDirectoryPicker()
                                    if await dirHandle.queryPermission(modeObject) != "granted":
                                        if await dirHandle.requestPermission(modeObject) != "granted":
                                            raise Exception("Unable to read and write directory")
                                    nativefs = await pyodide_js.mountNativeFS("/mount_dir", dirHandle)

                                    print(os.listdir('/mount_dir'))




                                except Exception as exc:
                                    print(exc)


                        except Exception as exc:
                            print(exc)
                    </script>

                    <!script type="py" terminal config='{ "packages": [ "fastapi", "pydantic", "pyodide_http", "asyncio" , "cls" ] }' output="qr_show">
                        try:
                            import pyodide_http , cls, os
                            import asyncio, logging
                            from js import document
                            import base64
                            from pathlib import Path

                            pyodide_http.patch_all()
                            logging.basicConfig(format='%(levelname)s:%(message)s', level=logging.DEBUG)

                            async def download(url):
                                        filename = Path(url).name
                                        response = await pyodide_http.pyfetch(url, method="GET")
                                        if response.status == 200:
                                            status = response.status
                                            with open(filename, mode="wb") as file:
                                                file.write(await response.bytes())
                                            return filename, status
                                        else:
                                            status = response.status
                                            filename = None
                                            return filename, status

                            async def get_url(url):
                                        loop = asyncio.get_event_loop()
                                        response_content = await loop.run_until_complete(
                                            download(url)
                                            )
                                        if response_content[1] == 200:
                                            data = base64.b64encode(open(response_content[0], "rb").read()).decode("utf-8")
                                            src = f"data:image/png;base64,{data}"
                                            await src
                                        else:
                                            src = None
                                            await src

                            img = get_url("https://cataas.com/cat")
                            document.querySelector("img").setAttribute("src", img)
                        except Exception as exc:
                            print(exc)
                    <!/script>